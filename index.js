!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.Differify=r():t.Differify=r()}(this,(function(){return function(t){var r={};function n(e){if(r[e])return r[e].exports;var o=r[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=r,n.d=function(t,r,e){n.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:e})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,r){if(1&r&&(t=n(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)n.d(e,o,function(r){return t[r]}.bind(null,o));return e},n.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(r,"a",r),r},n.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},n.p="",n(n.s=0)}([function(t,r,n){"use strict";function e(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.push.apply(n,e)}return n}function o(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(r){u(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))}))}return t}function u(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
 * Copyright(c) 2020 Fabian Roberto Orue <fabianorue@gmail.com>
 * BSD Licensed
 */function a(t){return t&&!Array.isArray(t)&&"object"===i(t)}function c(t){return t&&"string"==typeof t&&t.length>0}function f(t,r){return t.hasOwnProperty?t.hasOwnProperty(r):void 0!==t[r]}n.r(r);var l={REFERENCE:"REFERENCE",DIFF:"DIFF",STRING:"STRING"};function s(t){if(this.compareArraysInOrder=!0,this.mode={array:l.DIFF,object:l.DIFF,function:l.REFERENCE},a(t)&&("boolean"==typeof t.compareArraysInOrder&&(this.compareArraysInOrder=t.compareArraysInOrder),a(t.mode))){var r=Object.values(l);if(c(t.mode.array)){var n=t.mode.array.toUpperCase();-1!==r.indexOf(n)&&(this.mode.array=n)}if(c(t.mode.object)){var e=t.mode.object.toUpperCase();-1!==r.indexOf(e)&&(this.mode.object=e)}if(c(t.mode.function)){var o=t.mode.function.toUpperCase();o!==l.REFERENCE&&o!==l.STRING||(this.mode.function=o)}}}var p={ADDED:"ADDED",DELETED:"DELETED",MODIFIED:"MODIFIED",EQUAL:"EQUAL"},g=Symbol("invalid");function E(t,r,n){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{original:t,current:r,status:n,changes:e}}function y(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{_:t,status:r,changes:n}}var D={string:null,number:null,function:null,object:null},h={};function b(t,r){return t===r?E(t,r,p.EQUAL):E(t,r,p.MODIFIED,1)}function d(t,r){if(t===r)return E(t,r,p.EQUAL);var n=i(t);if(n!==i(r))return E(t,r,p.MODIFIED,1);var e=D[n];return e?e(t,r):b(t,r)}function v(t,r){return t.getTime()===r.getTime()?E(t,r,p.EQUAL):E(t,r,p.MODIFIED,1)}function O(t,r){var n,e,o=0;t.length>r.length||t.length===r.length?(n=t,e=r,o=-1):(n=r,e=t,o=1);var u,i=[],a=0;for(u=0;u<e.length;++u)i.push(d(t[u],r[u])),a+=i[u].changes||0;if(-1===o)for(;u<n.length;++u)i.push(E(t[u],null,p.DELETED,1)),++a;else if(1===o)for(;u<n.length;++u)i.push(E(null,r[u],p.ADDED,1)),++a;return y(i,a>0?p.MODIFIED:p.EQUAL,a)}function m(t,r){var n;n=t.length>r.length||t.length===r.length?t:r;var e,o,u,i,a,c,f=Object.create(null),l=[],s=0,g=[];for(e=0;e<n.length;++e)e<t.length&&(void 0!==(o=f[i=JSON.stringify(t[e])])?((u=l[o]).a=t[e],c=d(u.a,u.b),g[o]=void 0!==c._?E(c._.original,c._.current,c.status,c.changes):c,g[o].status!==p.EQUAL?++s:--s,delete f[i]):(l.push({a:t[e],b:null}),g.push(E(t[e],null,p.DELETED,1)),++s,f[i]=l.length-1)),e<r.length&&(void 0!==(o=f[a=JSON.stringify(r[e])])?((u=l[o]).b=r[e],c=d(u.a,u.b),g[o]=void 0!==c._?E(u.a,u.b,c.status,c.changes):c,g[o].status!==p.EQUAL?++s:--s,delete f[a]):(l.push({b:r[e],a:null}),f[a]=l.length-1,g.push(E(null,r[e],p.ADDED,1)),++s));return y(g,s>0?p.MODIFIED:p.EQUAL,s)}function I(t,r){var n=t.toString(),e=r.toString();return n===e?E(n,e,p.EQUAL):E(n,e,p.MODIFIED,1)}function j(t,r){var n={},e=0,o=0,u=0;for(var i in t)f(t,i)&&(++e,f(r,i)?n[i]=d(t[i],r[i]):n[i]=E(t[i],null,p.DELETED,1),u+=n[i].changes);for(var a in r)f(r,a)&&(++o,f(t,a)||(n[a]=E(null,r[a],p.ADDED,1),u+=n[a].changes));return 0===e&&0===o?y(null,p.EQUAL,u):y(n,u>0?p.MODIFIED:p.EQUAL,u)}function F(t,r){var n=Object.prototype.toString.call(t);if(n===Object.prototype.toString.call(r)){var e=h[n];return e?e(t,r):b(t,r)}return E(t,r,p.MODIFIED,1)}var A=function(t){var r={};r[l.DIFF]=j,r[l.REFERENCE]=function(t,r){var n=b(t,r);return y(null,n.status,n.changes)},r[l.STRING]=function(t,r){var n=function(t,r){var n=JSON.stringify(t),e=JSON.stringify(r);return n===e?E(n,e,p.EQUAL):E(n,e,p.MODIFIED,1)}(t,r);return y(null,n.status,n.changes)};var n={};n[l.DIFF]=t.compareArraysInOrder?O:m,n[l.REFERENCE]=function(t,r){var n=b(t,r);return y(null,n.status,n.changes)},n[l.STRING]=function(t,r){var n,e,o=(e=r,(n=t).length===e.length&&JSON.stringify(n)===JSON.stringify(e)?E(n,e,p.EQUAL):E(n,e,p.MODIFIED,1));return y(null,o.status,o.changes)};var e={};e[l.REFERENCE]=b,e[l.STRING]=I,D.string=b,D.number=b,D.boolean=b,D.function=e[t.mode.function],D.object=F,h["[object Array]"]=n[t.mode.array],h["[object Date]"]=v,h["[object Object]"]=r[t.mode.object]},S=function(t,r){if((u=t)&&Array.isArray(u)){for(var n,e=[],o=0;o<t.length;o++)(n=r(t[o]))!==g&&e.push(n);return e}var u;if("object"===i(t)){var a,c={};for(var f in t)t.hasOwnProperty(f)&&(a=r(t[f]))!==g&&(c[f]=a);return c}return r(t)},_=function t(r){return r._?S(r._,t):r.status===p.DELETED?r.original:r.current},L=function t(r){return r._?S(r._,t):r.status===p.ADDED?r.current:r.original},R=function(t){return function r(n){return n._&&n.changes>0?S(n._,r):n.status===p.EQUAL?g:t(n)}},U=function(t){var r=t===p.DELETED?"original":"current",n=t===p.EQUAL;return function e(o){return o._&&(n||o.changes>0)?S(o._,e):o.status===t?o[r]:g}},N=function(t){return t.mode.object===l.DIFF&&t.mode.array===l.DIFF},M=function(t){if("string"==typeof t){var r=t.toUpperCase().trim();return-1!==Object.values(p).indexOf(r)?r:null}return null};function P(t){this.config=new s(t),A(this.config)}P.prototype.setConfig=function(t){this.config=new s(t),A(this.config)},P.prototype.getConfig=function(){return{compareArraysInOrder:this.config.compareArraysInOrder,mode:o({},this.config.mode)}},P.prototype.compare=function(t,r){return function(t,r){var n=i(t);if(n!==i(r))return E(t,r,p.MODIFIED,1);var e=D[n];return e?e(t,r):b(t,r)}(t,r)},P.prototype.applyLeftChanges=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&t._&&N(this.config)?S(t._,r?R(L):L):null},P.prototype.applyRightChanges=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&t._&&N(this.config)?S(t._,r?R(_):_):null},P.prototype.filterDiffByStatus=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.MODIFIED,n=M(r);return t&&t._&&n&&N(this.config)?S(t._,U(r)):null},r.default=P}]).default}));