!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.Differify=n():t.Differify=n()}(this,(function(){return function(t){var n={};function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(e,o,function(n){return t[n]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=0)}([function(t,n,r){"use strict";function e(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,e)}return r}function o(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(n){u(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}function u(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
 * Copyright(c) 2020 Fabian Roberto Orue <fabianorue@gmail.com>
 * BSD Licensed
 */function f(t){return t&&!Array.isArray(t)&&"object"===i(t)}function c(t){return t&&"string"==typeof t&&t.length>0}function a(t,n){return t.hasOwnProperty?t.hasOwnProperty(n):void 0!==t[n]}r.r(n);var l={REFERENCE:"REFERENCE",DIFF:"DIFF",STRING:"STRING"};function s(t){if(this.mode={array:l.DIFF,object:l.DIFF,function:l.REFERENCE},f(t)&&f(t.mode)){var n=Object.values(l);if(c(t.mode.array)){var r=t.mode.array.toUpperCase();-1!==n.indexOf(r)&&(this.mode.array=r)}if(c(t.mode.object)){var e=t.mode.object.toUpperCase();-1!==n.indexOf(e)&&(this.mode.object=e)}if(c(t.mode.function)){var o=t.mode.function.toUpperCase();o!==l.REFERENCE&&o!==l.STRING||(this.mode.function=o)}}}var p={ADDED:"ADDED",DELETED:"DELETED",MODIFIED:"MODIFIED",EQUAL:"EQUAL"};function E(t,n,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{original:t,current:n,status:r,changes:e}}function y(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{_:t,status:n,changes:r}}var g={string:null,number:null,function:null,object:null},D={};function b(t,n){return t===n?E(t,n,p.EQUAL):E(t,n,p.MODIFIED,1)}function v(t,n){if(t===n)return E(t,n,p.EQUAL);var r=i(t);if(r!==i(n))return E(t,n,p.MODIFIED,1);var e=g[r];return e?e(t,n):b(t,n)}function h(t,n){return t.getTime()===n.getTime()?E(t,n,p.EQUAL):E(t,n,p.MODIFIED,1)}function d(t,n){var r,e,o=0;t.length>n.length||t.length===n.length?(r=t,e=n,o=-1):(r=n,e=t,o=1);var u,i=[],f=0;for(u=0;u<e.length;++u)i.push(v(t[u],n[u])),f+=i[u].changes||0;if(-1===o)for(;u<r.length;++u)i.push(E(t[u],null,p.DELETED,1)),++f;else if(1===o)for(;u<r.length;++u)i.push(E(null,n[u],p.ADDED,1)),++f;return y(i,f>0?p.MODIFIED:p.EQUAL,f)}function O(t,n){var r=t.toString(),e=n.toString();return r===e?E(r,e,p.EQUAL):E(r,e,p.MODIFIED,1)}function m(t,n){var r={},e=0,o=0,u=0;for(var i in t)a(t,i)&&(++e,a(n,i)?r[i]=v(t[i],n[i]):r[i]=E(t[i],null,p.DELETED,1),u+=r[i].changes);for(var f in n)a(n,f)&&(++o,a(t,f)||(r[f]=E(null,n[f],p.ADDED,1),u+=r[f].changes));return 0===e&&0===o?y(null,p.EQUAL,u):y(r,u>0?p.MODIFIED:p.EQUAL,u)}function j(t,n){var r=Object.prototype.toString.call(t);if(r===Object.prototype.toString.call(n)){var e=D[r];return e?e(t,n):b(t,n)}return E(t,n,p.MODIFIED)}var I=function(t){var n={};n[l.DIFF]=m,n[l.REFERENCE]=function(t,n){var r=b(t,n);return y(null,r.status,r.changes)},n[l.STRING]=function(t,n){var r=function(t,n){var r=JSON.stringify(t),e=JSON.stringify(n);return r===e?E(r,e,p.EQUAL):E(r,e,p.MODIFIED,1)}(t,n);return y(null,r.status,r.changes)};var r={};r[l.DIFF]=d,r[l.REFERENCE]=function(t,n){var r=b(t,n);return y(null,r.status,r.changes)},r[l.STRING]=function(t,n){var r,e,o=(e=n,(r=t).length===e.length&&JSON.stringify(r)===JSON.stringify(e)?E(r,e,p.EQUAL):E(r,e,p.MODIFIED,1));return y(null,o.status,o.changes)};var e={};e[l.REFERENCE]=b,e[l.STRING]=O,g.string=b,g.number=b,g.boolean=b,g.function=e[t.mode.function],g.object=j,D["[object Array]"]=r[t.mode.array],D["[object Date]"]=h,D["[object Object]"]=n[t.mode.object]},F=function(t,n){if((u=t)&&Array.isArray(u)){for(var r,e=[],o=0;o<t.length;o++)(r=n(t[o]))&&e.push(r);return e}var u;if("object"===i(t)){var f,c={};for(var a in t)t.hasOwnProperty(a)&&(f=n(t[a]))&&(c[a]=f);return c}return n(t)},S=function t(n){return n._?F(n._,t):n.status===p.DELETED?n.original:n.current},A=function t(n){return n._?F(n._,t):n.status===p.ADDED?n.current:n.original},R=function(t){return function n(r){return r._&&r.changes>0?F(r._,n):r.status===p.EQUAL?null:t(r)}},_=function(t){var n=t===p.DELETED?"original":"current",r=t===p.EQUAL;return function e(o){return o._&&(r||o.changes>0)?F(o._,e):o.status===t?o[n]:null}},L=function(t){return t.mode.object===l.DIFF&&t.mode.array===l.DIFF},M=function(t){if("string"==typeof t){var n=t.toUpperCase().trim();return-1!==Object.values(p).indexOf(n)?n:null}return null};function N(t){this.config=new s(t),I(this.config)}N.prototype.setConfig=function(t){this.config=new s(t),I(this.config)},N.prototype.getConfig=function(){return{mode:o({},this.config.mode)}},N.prototype.compare=function(t,n){return function(t,n){var r=i(t);if(r!==i(n))return E(t,n,p.MODIFIED,1);var e=g[r];return e?e(t,n):b(t,n)}(t,n)},N.prototype.applyLeftChanges=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&t._&&L(this.config)?F(t._,n?R(A):A):null},N.prototype.applyRightChanges=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&t._&&L(this.config)?F(t._,n?R(S):S):null},N.prototype.filterDiffByStatus=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.MODIFIED,r=M(n);return t&&t._&&r&&L(this.config)?F(t._,_(n)):null},n.default=N}]).default}));