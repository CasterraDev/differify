!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.Differify=n():t.Differify=n()}(this,(function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";function r(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function o(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?r(Object(e),!0).forEach((function(n){u(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function u(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
 * Copyright(c) 2020 Fabian Roberto Orue <fabianorue@gmail.com>
 * BSD Licensed
 */function f(t){return t&&"[object Array]"===Object.prototype.toString.call(t)}function c(t){return t&&!f(t)&&"object"===i(t)}function a(t){return t&&"string"==typeof t&&t.length>0}function l(t,n){return t.hasOwnProperty?t.hasOwnProperty(n):void 0!==t[n]}e.r(n);var s={REFERENCE:"REFERENCE",DIFF:"DIFF",STRING:"STRING"};function p(t){if(this.mode={array:s.DIFF,object:s.DIFF,function:s.REFERENCE},c(t)&&c(t.mode)){var n=Object.values(s);if(a(t.mode.array)){var e=t.mode.array.toUpperCase();-1!==n.indexOf(e)&&(this.mode.array=e)}if(a(t.mode.object)){var r=t.mode.object.toUpperCase();-1!==n.indexOf(r)&&(this.mode.object=r)}if(a(t.mode.function)){var o=t.mode.function.toUpperCase();o!==s.REFERENCE&&o!==s.STRING||(this.mode.function=o)}}}var g="ADDED",y="DELETED",b="MODIFIED",v="EQUAL";function d(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{original:t,current:n,status:e,changes:r}}function h(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{_:t,status:n,changes:e}}var m={string:null,number:null,function:null,object:null},j={};function O(t,n){return t===n?d(t,n,v):d(t,n,b,1)}function E(t,n){if(t===n)return d(t,n,v);var e=i(t);if(e!==i(n))return d(t,n,b,1);var r=m[e];return r?r(t,n):O(t,n)}function S(t,n){return t.getTime()===n.getTime()?d(t,n,v):d(t,n,b,1)}function F(t,n){var e,r,o=0;t.length>n.length||t.length===n.length?(e=t,r=n,o=-1):(e=n,r=t,o=1);var u,i=[],f=0;for(u=0;u<r.length;++u)i.push(E(t[u],n[u])),f+=i[u].changes||0;if(-1===o)for(;u<e.length;++u)i.push(d(t[u],null,y,1)),++f;else if(1===o)for(;u<e.length;++u)i.push(d(null,n[u],g,1)),++f;return h(i,f>0?b:v,f)}function D(t,n){var e=t.toString(),r=n.toString();return e===r?d(e,r,v):d(e,r,b,1)}function R(t,n){var e={},r=0,o=0,u=0;for(var i in t)l(t,i)&&(++r,l(n,i)?e[i]=E(t[i],n[i]):e[i]=d(t[i],null,y,1),u+=e[i].changes);for(var f in n)l(n,f)&&(++o,l(t,f)||(e[f]=d(null,n[f],g,1),u+=e[f].changes));return 0===r&&0===o?h(null,v,u):h(e,u>0?b:v,u)}function N(t,n){var e=Object.prototype.toString.call(t);if(e===Object.prototype.toString.call(n)){var r=j[e];return r?r(t,n):O(t,n)}return d(t,n,b)}var P=function(t){var n={};n[s.DIFF]=R,n[s.REFERENCE]=function(t,n){var e=O(t,n);return h(null,e.status,e.changes)},n[s.STRING]=function(t,n){var e=function(t,n){var e=JSON.stringify(t),r=JSON.stringify(n);return e===r?d(e,r,v):d(e,r,b,1)}(t,n);return h(null,e.status,e.changes)};var e={};e[s.DIFF]=F,e[s.REFERENCE]=function(t,n){var e=O(t,n);return h(null,e.status,e.changes)},e[s.STRING]=function(t,n){var e,r,o=(r=n,(e=t).length===r.length&&JSON.stringify(e)===JSON.stringify(r)?d(e,r,v):d(e,r,b,1));return h(null,o.status,o.changes)};var r={};r[s.REFERENCE]=O,r[s.STRING]=D,m.string=O,m.number=O,m.boolean=O,m.function=r[t.mode.function],m.object=N,j["[object Array]"]=e[t.mode.array],j["[object Date]"]=S,j["[object Object]"]=n[t.mode.object]},_=function(t,n){if(f(t)){for(var e,r=[],o=0;o<t.length;o++)(e=n(t[o]))&&r.push(e);return r}if("object"===i(t)){var u,c={};for(var a in t)t.hasOwnProperty(a)&&(u=n(t[a]))&&(c[a]=u);return c}return n(t)},I=function t(n){return n._?_(n._,t):n.status===y?n.original:n.current},C=function t(n){return n._?_(n._,t):n.status===g?n.current:n.original},w=function(t){return function n(e){return e._&&e.changes>0?_(e._,n):e.status===v?null:t(e)}},x=function(t){return t.mode.object===s.DIFF&&t.mode.array===s.DIFF};function T(t){this.config=new p(t),P(this.config)}T.prototype.setConfig=function(t){this.config=new p(t),P(this.config)},T.prototype.getConfig=function(){return{mode:o({},this.config.mode)}},T.prototype.compare=function(t,n){return function(t,n){var e=i(t);if(e!==i(n))return d(t,n,b,1);var r=m[e];return r?r(t,n):O(t,n)}(t,n)},T.prototype.applyLeftChanges=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&t._&&x(this.config)?_(t._,n?w(C):C):null},T.prototype.applyRightChanges=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&t._&&x(this.config)?_(t._,n?w(I):I):null},n.default=T}]).default}));